@model MonackFr.Mvc.Areas.UserManagement.ViewModels.DetailsGroup
@using MonackFr.Mvc.Entities
@{
	ViewBag.Title = "Edit group";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Edit</h2>

@using (Html.BeginForm()) {
	@Html.ValidationSummary(true)

	<fieldset>
		<legend>Group</legend>
		<div class="editor-label">
			@Html.LabelFor(model => model.Name)
		</div>
		<div class="editor-field">
			@Html.EditorFor(model => model.Name)
			@Html.ValidationMessageFor(model => model.Name)
		</div>
		<div class="editor-label">
			@Html.LabelFor(model => model.Description)
		</div>
		<div class="editor-field">
			@Html.EditorFor(model => model.Description)
			@Html.ValidationMessageFor(model => model.Description)
		</div>
		<div>Roles:		  
			@Html.EditorFor(model => model.GroupRoles) @*Uses editor template*@	
		</div>			
		<p>
			<input type="submit" value="Delete" />
		</p>
	</fieldset>
}

 <div>Add User:
			@using (Html.BeginForm("AddUserToGroup", "Group"))
				{
				@Html.HiddenFor(g => g.Id);
				@Html.DropDownList("userId", (SelectList)ViewBag.AllUsers)		
				<input type="submit" />
				}
			</div>

<div>
	@Html.ActionLink("Back to List", "Index")
</div>

<div>
	<div>Users:
	@foreach (User user in Model.Users)
	{
	<div>
		@user.UserName
		@using (Html.BeginForm("RemoveUserFromGroup", "Group", new { userId = user.Id, groupId = Model.Id }))
		{
			<input type="submit" value="delete" />
		}
	</div> 
	}
	</div>				
</div>	

@section Scripts {
	@Scripts.Render("~/bundles/jqueryval")
}
